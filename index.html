
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Countdown Timer 2.0</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: sans-serif;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      background-color: white;
    }

    #timer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(0deg);
      font-size: 80vmin; /* Better for mobile */
      color: #333;
      transition: color 0.2s ease, transform 0.3s ease;
      user-select: none;
    }
  </style>
</head>

<body>
  <div id="timer">40</div>

  <script>
    const START_TIME = 40;
    let countdown = START_TIME;
    let intervalId;
    let rotation = 0;
    let isPaused = false;
    let longPressTimeout;
    let lastMouseDownTime = 0;

    const colors = ['#333', '#e74c3c', '#2980b9', '#27ae60'];
    let colorIndex = 0;
    const timerElement = document.getElementById('timer');

    function startCountdown() {
      clearInterval(intervalId);
      countdown = START_TIME;
      timerElement.textContent = countdown;

      rotation += 90;
      timerElement.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;

      colorIndex = (colorIndex + 1) % colors.length;
      timerElement.style.color = colors[colorIndex];

      isPaused = false;
      timerElement.style.opacity = 1;

      intervalId = setInterval(tick, 1000);
    }

    function tick() {
      if (!isPaused) {
        countdown--;
        timerElement.textContent = countdown;
        if (countdown <= 0) {
          clearInterval(intervalId);
        }
      }
    }

    // Start initially
    startCountdown();

    // Handle long press for pause
    document.body.addEventListener('mousedown', () => {
      lastMouseDownTime = Date.now();
      longPressTimeout = setTimeout(() => {
        isPaused = !isPaused;
        timerElement.style.opacity = isPaused ? 0.5 : 1;
      }, 500); // 500ms threshold for long press
    });

    document.body.addEventListener('mouseup', () => {
      clearTimeout(longPressTimeout);
      if (Date.now() - lastMouseDownTime < 500) {
        startCountdown(); // short click => restart
      }
    });

    // Prevent long press triggering after leaving window
    document.body.addEventListener('mouseleave', () => {
      clearTimeout(longPressTimeout);
    });
  </script>
</body>
</html>
